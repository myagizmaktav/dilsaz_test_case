import Head from "next/head";

import { useInitialHook } from "@/hook/initialHook";
import styles from "./main.module.scss";
import { Tables } from "../tables/tables";

import { Filtering } from "../filtering/filtering";
import { useWindowSize } from "@/hook/useDimension";
import { Add } from "../add/add";
import { todoAtom } from "@/data/todo";
import { useAtomValue } from "jotai";

import { Suspense } from "react";
import dynamic from "next/dynamic";
import { RobotoFont } from "@/utils/font";
export const DynamicModal = dynamic(
  //@ts-ignore
  () => import("../modals/modal/modal"),
  {
    suspense: true,
  }
);

export const Main = () => {
  useInitialHook();
  const { isBigScreen } = useWindowSize();
  const todo = useAtomValue(todoAtom);
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={` ${RobotoFont.className} ${styles.mainWrapper}`}>
        {isBigScreen && <div className={styles.side} />}

        <div className={styles.toMiddle}>
          <Add />
          <Filtering />

          <Tables todo={todo} />
          <Suspense>
            <DynamicModal />
          </Suspense>
        </div>

        {isBigScreen && <div className={styles.side} />}
      </main>
    </>
  );
};
